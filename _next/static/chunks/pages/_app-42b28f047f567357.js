(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6570:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(7816)}])},4267:function(e,r,n){"use strict";n.d(r,{H:function(){return y},V:function(){return v}});var t=n(4776),i=n.n(t),o=n(2322),u=n(7164),a=n(2784);function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function c(e,r,n,t,i,o,u){try{var a=e[o](u),l=a.value}catch(c){return void n(c)}a.done?r(l):Promise.resolve(l).then(t,i)}function s(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var o=e.apply(r,n);function u(e){c(o,t,i,u,a,"next",e)}function a(e){c(o,t,i,u,a,"throw",e)}u(void 0)}))}}function f(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){f(e,r,n[r])}))}return e}function p(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return l(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=(0,a.createContext)({}),y=function(e){var r=e.children,n=(0,a.useState)(null),t=n[0],l=n[1],c=(0,a.useState)([]),f=c[0],y=c[1];(0,a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("@encryptr:users")||"[]");y(e);var r=localStorage.getItem("@encryptr:logged-user-id");l(e.find((function(e){return e.id===r}))||null)}),[]);var g=(0,a.useCallback)(function(){var e=s(i().mark((function e(r){var n,t,o,a,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.username,t=r.email,o=r.password,a=r.type,!f.find((function(e){return e.username===n}))){e.next=4;break}return e.abrupt("return",{error:{field:"username",message:"Username ".concat(n," already taken")}});case 4:if(!f.find((function(e){return e.email===t}))){e.next=7;break}return e.abrupt("return",{error:{field:"email",message:"E-mail ".concat(t," already taken")}});case 7:return c={id:(0,u.x0)(12),type:a,username:n,email:t,password:o,files:[],folders:[]},l(c),s=[c].concat(p(f)),y(s),localStorage.setItem("@encryptr:logged-user-id",c.id),localStorage.setItem("@encryptr:users",JSON.stringify(s)),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[f]),b=(0,a.useCallback)(function(){var e=s(i().mark((function e(r){var n,t,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.login,t=r.password,o=f.find((function(e){return e.email===n||e.username===n?e:null}))){e.next=4;break}return e.abrupt("return",{error:{field:"login",message:"Could not find your user :/"}});case 4:if(o.password===t){e.next=6;break}return e.abrupt("return",{error:{field:"password",message:"Boo, wrong password :("}});case 6:return l(o),localStorage.setItem("@encryptr:logged-user-id",o.id),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[f]),m=(0,a.useCallback)((function(){var e={id:(0,u.x0)(12),label:"",content:"",service:"ROT",details:{skip:13}},r=d({},t,{files:[e].concat(p(t.files))});l(r);var n=[r].concat(p(f.filter((function(e){return e.id!==t.id}))||[]));return y(n),localStorage.setItem("@encryptr:users",JSON.stringify(n)),e}),[t,f]),h=(0,a.useCallback)((function(e){return(null===t||void 0===t?void 0:t.files.find((function(r){return r.id===e})))||null}),[null===t||void 0===t?void 0:t.files]),S=(0,a.useCallback)((function(e){var r=d({},t,{files:(null===t||void 0===t?void 0:t.files.filter((function(r){return r.id!==e})))||[]});l(r);var n=[r].concat(p(f.filter((function(e){return e.id!==t.id}))||[]));y(n),localStorage.setItem("@encryptr:users",JSON.stringify(n))}),[t,f]),w=(0,a.useCallback)((function(e,r){var n=null===t||void 0===t?void 0:t.files.find((function(r){return r.id===e}));if(n){var i=d({},n,{label:r}),o=d({},t,{files:[i].concat(p(t.files.filter((function(r){return r.id!==e}))))});l(o);var u=[o].concat(p(f.filter((function(e){return e.id!==t.id}))||[]));y(u),localStorage.setItem("@encryptr:users",JSON.stringify(u))}}),[t,f]),k=(0,a.useCallback)((function(e,r,n){var i=n;n||(i=null===t||void 0===t?void 0:t.files.find((function(r){return r.id===e})));var o=d({},i,{content:r}),u=d({},t,{files:[o].concat(p(t.files.filter((function(r){return r.id!==e}))))});l(u);var a=[u].concat(p(f.filter((function(e){return e.id!==t.id}))||[]));y(a),localStorage.setItem("@encryptr:users",JSON.stringify(a))}),[t,f]),O=(0,a.useCallback)((function(e,r,n){var i=n;n||(i=null===t||void 0===t?void 0:t.files.find((function(r){return r.id===e})));var o=d({},i,{service:r}),u=d({},t,{files:[o].concat(p(t.files.filter((function(r){return r.id!==e}))))});l(u);var a=[u].concat(p(f.filter((function(e){return e.id!==t.id}))||[]));return y(a),localStorage.setItem("@encryptr:users",JSON.stringify(a)),o}),[t,f]),C=(0,a.useCallback)((function(e,r){var n=r.skip,i=r.shift,o=r.keys,u=d({},null===t||void 0===t?void 0:t.files.find((function(r){return r.id===e})),{details:{keys:o,shift:i,skip:n}}),a=d({},t,{files:[u].concat(p(t.files.filter((function(r){return r.id!==e}))))});l(a);var c=p(f.filter((function(e){return e.id!==t.id}))||[]).concat([a]);return y(c),localStorage.setItem("@encryptr:users",JSON.stringify(c)),u}),[t,f]),I=(0,a.useCallback)((function(){localStorage.removeItem("@encryptr:logged-user-id"),l(null)}),[]);return(0,o.jsx)(v.Provider,{value:{user:t,handleRegister:g,loadFileByID:h,handleLogin:b,users:f,handleLogout:I,setUsers:y,deleteFileByID:S,handleCreateFile:m,handleUpdateFileTitle:w,handleUpdateFileContent:k,handleUpdateFileService:O,handleUpdateFileDetails:C},children:r})}},7816:function(e,r,n){"use strict";n.r(r);var t=n(2322),i=(n(4396),n(4267));function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){o(e,r,n[r])}))}return e}r.default=function(e){var r=e.Component,n=e.pageProps;return(0,t.jsx)(i.H,{children:(0,t.jsx)(r,u({},n))})}},4396:function(){},7164:function(e,r,n){"use strict";n.d(r,{x0:function(){return t}});let t=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,r)=>e+=(r&=63)<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r>62?"-":"_"),"")}},function(e){var r=function(r){return e(e.s=r)};e.O(0,[774,179],(function(){return r(6570),r(2203)}));var n=e.O();_N_E=n}]);