(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6570:function(r,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(7816)}])},4267:function(r,e,n){"use strict";n.d(e,{H:function(){return d},V:function(){return p}});var t=n(4776),u=n.n(t),o=n(2322),a=n(7164),i=n(2784);function c(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function s(r,e,n,t,u,o,a){try{var i=r[o](a),c=i.value}catch(s){return void n(s)}i.done?e(c):Promise.resolve(c).then(t,u)}function l(r){return function(){var e=this,n=arguments;return new Promise((function(t,u){var o=r.apply(e,n);function a(r){s(o,t,u,a,i,"next",r)}function i(r){s(o,t,u,a,i,"throw",r)}a(void 0)}))}}function f(r){return function(r){if(Array.isArray(r))return c(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,e){if(!r)return;if("string"===typeof r)return c(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(r,e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=(0,i.createContext)({}),d=function(r){var e=r.children,n=(0,i.useState)(null),t=n[0],c=n[1],s=(0,i.useState)([]),d=s[0],m=s[1];(0,i.useEffect)((function(){var r=JSON.parse(localStorage.getItem("@encryptr:users")||"[]");m(r);var e=localStorage.getItem("@encryptr:logged-user-id");c(d.find((function(r){return r.id===e}))||null)}),[d]);var y=(0,i.useCallback)(function(){var r=l(u().mark((function r(e){var n,t,o,i,s,l;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.username,t=e.email,o=e.password,i=e.type,!d.find((function(r){return r.username===n}))){r.next=4;break}return r.abrupt("return",{error:{field:"username",message:"Username ".concat(n," already taken")}});case 4:if(!d.find((function(r){return r.email===t}))){r.next=7;break}return r.abrupt("return",{error:{field:"email",message:"E-mail ".concat(t," already taken")}});case 7:return s={id:(0,a.x0)(12),type:i,username:n,email:t,password:o},c(s),l=[s].concat(f(d)),m(l),localStorage.setItem("@encryptr:logged-user-id",s.id),localStorage.setItem("@encryptr:users",JSON.stringify(l)),r.abrupt("return",null);case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[d]),g=(0,i.useCallback)(function(){var r=l(u().mark((function r(e){var n,t,o;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.login,t=e.password,o=d.find((function(r){return r.email===n||r.username===n?r:null})),console.log(o),o){r.next=5;break}return r.abrupt("return",{error:{field:"login",message:"Could not find your user :/"}});case 5:if(o.password===t){r.next=7;break}return r.abrupt("return",{error:{field:"password",message:"Boo, wrong password :("}});case 7:return c(o),localStorage.setItem("@encryptr:logged-user-id",o.id),r.abrupt("return",null);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[d]);return(0,o.jsx)(p.Provider,{value:{user:t,handleRegister:y,handleLogin:g},children:e})}},7816:function(r,e,n){"use strict";n.r(e);var t=n(2322),u=(n(4396),n(4267));function o(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function a(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){o(r,e,n[e])}))}return r}e.default=function(r){var e=r.Component,n=r.pageProps;return(0,t.jsx)(u.H,{children:(0,t.jsx)(e,a({},n))})}},4396:function(){},7164:function(r,e,n){"use strict";n.d(e,{x0:function(){return t}});let t=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce(((r,e)=>r+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"")}},function(r){var e=function(e){return r(r.s=e)};r.O(0,[774,179],(function(){return e(6570),e(2203)}));var n=r.O();_N_E=n}]);